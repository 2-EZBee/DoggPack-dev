metadata:
  name: "github-actions-test"
  version: "1.0.0"
  created_date: "2025-08-05"
  created_by: "CDTZ"
  status: "active"
  risk_level: "low"
  estimated_duration: "10 minutes"

description:
  overview: "Test GitHub Actions automation workflow without affecting production"
  scope: "Demonstration of GitHub orchestration, task coordination, and status tracking"
  business_value: "Validate deployment automation before production use"
  success_criteria:
    - "GitHub Actions workflow triggers successfully"
    - "Deployment issue created and tracked"
    - "Repository dispatch events sent to CCN/CCW"
    - "Status updates flow correctly through GitHub"
    - "Rollback procedures accessible"

environment:
  target_machines:
    - name: "test-coordination"
      role: "Test coordination and validation"
      resources_required:
        cpu: "minimal"
        memory: "minimal"
        disk: "minimal"

prerequisites:
  system_requirements:
    - "GitHub Actions enabled on repository"
    - "Claude Code with GitHub MCP access on ZenDogg"
    - "Repository dispatch events configured"
  dependencies: []
  timeshift_snapshots: []

coordination:
  planning_instance: "CDTZ"
  execution_instances:
    - "TEST"
  communication_method: "github-actions-orchestration"
  state_sharing: "github-issues-and-repository-dispatch"
  checkpoint_intervals: "after each test step"
  failure_escalation: "document test results, no rollback needed"

deployment_steps:
  - name: "test_workflow_trigger"
    assigned_to: "CDTZ"
    description: "Test GitHub Actions workflow can be triggered from ZenDogg"
    estimated_duration: "2 minutes"
    dependencies: []
    github_coordination:
      workflow: "foundation-deployment.yml"
      trigger_method: "workflow_dispatch"
    validation:
      - "Workflow starts successfully"
      - "Workflow run ID captured"
      - "Initial status visible in Actions tab"
    rollback_actions:
      - "Cancel workflow if needed"

  - name: "test_issue_creation"
    assigned_to: "CDTZ"
    description: "Verify deployment tracking issue gets created"
    estimated_duration: "1 minute"
    dependencies: ["test_workflow_trigger"]
    github_coordination:
      issue_creation: "automated"
      labels: ["deployment", "test", "automation-demo"]
    validation:
      - "Issue created with correct title and body"
      - "Issue contains task checklist"
      - "Issue properly labeled"
    rollback_actions:
      - "Close test issue"

  - name: "test_repository_dispatch"
    assigned_to: "CDTZ"
    description: "Test repository dispatch events for CCN/CCW coordination"
    estimated_duration: "2 minutes"
    dependencies: ["test_issue_creation"]
    github_coordination:
      dispatch_events: ["ccn-deployment-task", "ccw-deployment-task"]
      payload_validation: true
    validation:
      - "Repository dispatch events sent successfully"
      - "Event payloads contain correct task assignments"
      - "Events visible in repository activity"
    rollback_actions:
      - "Document dispatch test results"

  - name: "test_status_updates"
    assigned_to: "CDTZ"
    description: "Test status update mechanisms through GitHub"
    estimated_duration: "3 minutes"
    dependencies: ["test_repository_dispatch"]
    github_coordination:
      issue_updates: "automated"
      status_tracking: "comment-based"
    validation:
      - "Can add comments to deployment issue"
      - "Status updates appear in real-time"
      - "Task completion tracking works"
    rollback_actions:
      - "Clean up test comments"

  - name: "test_workflow_monitoring"
    assigned_to: "CDTZ"
    description: "Test workflow monitoring and result capture"
    estimated_duration: "2 minutes"
    dependencies: ["test_status_updates"]
    github_coordination:
      monitoring: "workflow-status-api"
      completion_detection: "automated"
    validation:
      - "Workflow status can be queried"
      - "Completion status detected"
      - "Results properly captured"
    rollback_actions:
      - "Document monitoring test results"

external_integrations:
  github:
    required: true
    access_method: "github-mcp-native"
    validation:
      - "Can trigger workflows"
      - "Can create and update issues"
      - "Can send repository dispatch events"
      - "Can monitor workflow status"

rollback_plan:
  trigger_conditions:
    - "Test demonstrates workflow issues"
    - "GitHub API errors encountered"
    - "Manual test termination requested"
  
  rollback_steps:
    - name: "cleanup_test_resources"
      description: "Clean up test issues, workflows, and comments"
      estimated_duration: "2 minutes"
    - name: "document_test_results"
      description: "Document what worked and what needs improvement"
      estimated_duration: "3 minutes"

approval:
  required_approvals:
    - "GitHub Actions enabled and accessible"
    - "Test plan reviewed"
    - "Test environment ready"
  approved_by: "CDTZ"
  approved_date: "2025-08-05"
  deployment_authorized: true